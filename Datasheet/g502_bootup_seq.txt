spi activity during 3366 power up procedure


time	    time delta	mosi	miso

>initial power

>~44ms gap

>raise NCS for first time

>2.6ms gap

>write 0xB6 to register 0x3b. for 9800, this is the shutdown command

>273ms gap

>drop NCS for 40us
>raise NCS for 40us

>write 0x5a to register 0x3a. same thing for 9800, where 0x3a is "Power_Up_Reset" register.
122205.68	122205.68	0xba	0xff
122211.12	5.44	0x5a	0xff

>wait 50ms

>write 0x95 to register 0x3d. turns on the clock tuning thing (pin 14) briefly
172399.36	50188.24	0xbd	0xff
172404.80	5.44	0x95	0xff
>write 0x15 to register 0x3d. turns off the clock tuning thing (pin 14)
173591.84	1187.04	0xbd	0xff
173597.36	5.52	0x15	0xff

>read registers 0x02, 0x03, 0x04, 0x05, 0x06
>same as step 5 for 9800, where these registers are Motion, Delta_X_L, Delta_X_H, Delta_Y_L, Delta_Y_H
173783.04	185.68	0x02	0xff
173950.16	167.12	0x00	0x00
173980.24	30.08	0x03	0xff
174147.04	166.80	0x00	0x00
174177.84	30.80	0x04	0xff
174344.64	166.80	0x00	0x00
174375.04	30.40	0x05	0xff
174542.16	167.12	0x00	0x00
174572.24	30.08	0x06	0xff
174739.04	166.80	0x00	0x00

>write 0x00 to register 0x10. ??
174770.56	31.52	0x90	0xff
174776.08	5.52	0x00	0xff

>write 0x00 to register 0x22. ??
174961.52	185.44	0xa2	0xff
174966.96	5.44	0x00	0xff

>write 0x1d to register 0x13. same as 9800 SROM Download procedure 2
175153.04	186.08	0x93	0xff
175158.48	5.44	0x1d	0xff

>wait 10ms. 9800 SROM Download step 3 says 1 frame. 10ms is probably just a safe value

>write 0x18 to register 0x13. same as 9800 SROM Download step 4
185345.04	10186.56	0x93	0xff
185350.48	5.44	0x18	0xff

>SROM download. same as 9800 SROM Download step 5. SROM_Load_Burst address is also 0x62 here.
185535.28	184.80	0xe2	0xff
185557.28	22.00	0x02	0xff
185579.44	22.16	0x07	0xff
185601.28	21.84	0x8b	0xff
185623.44	22.16	0x9a	0xff
185645.28	21.84	0x76	0xff
.
.
.
.
.
>SROM download finishes


>read 0x07 from register 0x2a
276068.80	224.80	0x2a	0xff
276235.92	167.12	0x00	0x07

>write 0x20 to register 0x10
276267.20	31.28	0x90	0xff
276272.72	5.52	0x20	0xff

>write 0xff to register 0x14
276458.00	185.28	0x94	0xff
276463.44	5.44	0xff	0xff

>write 0xff to register 0x17
276649.12	185.68	0x97	0xff
276654.56	5.44	0xff	0xff

>write 0x00 to register 0x18
276840.64	186.08	0x98	0xff
276846.08	5.44	0x00	0xff

>write 0x00 to register 0x19
277034.64	188.56	0x99	0xff
277040.16	5.52	0x00	0xff

>write 0x00 to register 0x1b
277226.16	186.00	0x9b	0xff
277231.68	5.52	0x00	0xff

>write 0x00 to register 0x1c
277417.68	186.00	0x9c	0xff
277423.12	5.44	0x00	0xff

>read 0x0a from register 0x2c
277608.88	185.76	0x2c	0xff
277775.68	166.80	0x00	0x0a

>read 0x10 from register 0x2b
277806.48	30.80	0x2b	0xff
277973.28	166.80	0x00	0x10

>write 0x0a to register 0x2c
278021.36	48.08	0xac	0xff
278026.80	5.44	0x0a	0xff

>write 0x10 to register 0x2b
278213.20	186.40	0xab	0xff
278218.72	5.52	0x10	0xff

>clock tuning thing here???
>~16ms between each of the next writes

>write 0x95 to register 0x3d
278405.68	186.96	0xbd	0xff
278411.12	5.44	0x95	0xff

>write 0x9d to register 0x3d
294764.80	16353.68	0xbd	0xff
294770.24	5.44	0x9d	0xff

>write 0x99 to register 0x3d
310039.60	15269.36	0xbd	0xff
310045.12	5.52	0x99	0xff

>write 0x97 to register 0x3d
326269.28	16224.16	0xbd	0xff
326274.80	5.52	0x97	0xff

>write 0x96 to register 0x3d
342055.76	15780.96	0xbd	0xff
342061.20	5.44	0x96	0xff

>write 0x16 to register 0x3d
358208.32	16147.12	0xbd	0xff
358213.76	5.44	0x16	0xff

>part 2 of clock tuning???

>write 0x90 to register 0x4f
358399.76	186.00	0xcf	0xff
358405.20	5.44	0x90	0xff

>write 0x88 to register 0x4f
374056.24	15651.04	0xcf	0xff
374061.68	5.44	0x88	0xff

>write 0x8c to register 0x4f
391489.36	17427.68	0xcf	0xff
391494.80	5.44	0x8c	0xff

>write 0x8e to register 0x4f
408454.48	16959.68	0xcf	0xff
408459.92	5.44	0x8e	0xff

>write 0x8f to register 0x4f
424603.28	16143.36	0xcf	0xff
424608.72	5.44	0x8f	0xff

>write 0x0e to register 0x4f
440340.24	15731.52	0xcf	0xff
440345.68	5.44	0x0e	0xff


>normal operation of motion burst reads begins here. format appears identical to that of 9800.

>write 0x00 to register 0x50 (Motion_Burst)
440922.96	577.28	0xd0	0xff
440928.40	5.44	0x00	0xff

>wait 180-190us

>read burst motion data from register 0x50
441122.48	194.08	0x50	0xff
441164.32	41.84	0x00	0x20 >motion
441170.40	6.08	0x00	0x7f >observation
441176.48	6.08	0x00	0x00 >Delta_X_L
441182.56	6.08	0x00	0x00 >Delta_X_H
441188.72	6.16	0x00	0x00 >Delta_Y_L
441194.80	6.08	0x00	0x00 >Delta_Y_H

>write 0xef to register 0x0f. (set dpi. dpi = (0xef + 1) * 500 = 12000 in this case)
441525.04	330.24	0x8f	0xff
441530.56	5.52	0xef	0xff

441922.88	392.32	0xd0	0xff
441928.32	5.44	0x00	0xff
442122.24	193.92	0x50	0xff
442164.08	41.84	0x00	0x20
442170.16	6.08	0x00	0x7f
442176.24	6.08	0x00	0x00
442182.32	6.08	0x00	0x00
442188.48	6.16	0x00	0x00
442194.56	6.08	0x00	0x00

>write 0x00 to register 0x42. (set angle snapping off. 0x80 for on, 0x00 for off)
442524.24	329.68	0xc2	0xff
442529.76	5.52	0x00	0xff

442934.08	404.32	0xd0	0xff
442939.52	5.44	0x00	0xff
443122.24	182.72	0x50	0xff
443164.00	41.76	0x00	0x20
443170.08	6.08	0x00	0x7f
443176.24	6.16	0x00	0x00
443182.32	6.08	0x00	0x00
443188.40	6.08	0x00	0x00
443194.48	6.08	0x00	0x00

443931.44	736.96	0xd0	0xff
443936.88	5.44	0x00	0xff
444122.00	185.12	0x50	0xff
444163.84	41.84	0x00	0x20
444169.92	6.08	0x00	0x7f
444176.00	6.08	0x00	0x00
444182.08	6.08	0x00	0x00
444188.24	6.16	0x00	0x00
444194.32	6.08	0x00	0x00

>everything past here is just stable motion burst reads
444923.04	728.72	0xd0	0xff
444928.56	5.52	0x00	0xff
445122.48	193.92	0x50	0xff
445163.92	41.44	0x00	0x20
445170.00	6.08	0x00	0x7f
445176.08	6.08	0x00	0x00
445182.16	6.08	0x00	0x00
445188.32	6.16	0x00	0x00
445194.40	6.08	0x00	0x00

445922.64	728.24	0xd0	0xff
445928.08	5.44	0x00	0xff
446122.00	193.92	0x50	0xff
446163.84	41.84	0x00	0x20
446169.92	6.08	0x00	0x7f
446176.00	6.08	0x00	0x00
446182.16	6.16	0x00	0x00
446188.24	6.08	0x00	0x00
446194.32	6.08	0x00	0x00

446922.48	728.16	0xd0	0xff
446927.92	5.44	0x00	0xff
447121.52	193.60	0x50	0xff
447162.96	41.44	0x00	0x20
447169.04	6.08	0x00	0x7f
447175.12	6.08	0x00	0x00
447181.20	6.08	0x00	0x00
447187.28	6.08	0x00	0x00
447193.36	6.08	0x00	0x00
.
.
.
